{
  "generatedAt": "2026-02-16T23:34:38.090Z",
  "baseUrl": "http://127.0.0.1:9013",
  "discoveredHandlers": 47,
  "passed": 47,
  "failed": 0,
  "skipped": 0,
  "allowHighRisk": false,
  "failures": [],
  "results": [
    {
      "method": "POST",
      "endpoint": "/api/ai/enhance-report",
      "key": "POST /api/ai/enhance-report",
      "file": "src/app/api/ai/enhance-report/route.ts",
      "ok": true,
      "skipped": false,
      "status": 200,
      "expected": [
        200
      ],
      "durationMs": 3573,
      "responsePreview": "{\"summary\":\"Reporte normalizado\"}",
      "location": ""
    },
    {
      "method": "POST",
      "endpoint": "/api/ai/generate-campaign",
      "key": "POST /api/ai/generate-campaign",
      "file": "src/app/api/ai/generate-campaign/route.ts",
      "ok": true,
      "skipped": false,
      "status": 200,
      "expected": [
        200
      ],
      "durationMs": 8766,
      "responsePreview": "{\"steps\":[{\"name\":\"Presentación y Desafío\",\"offsetDays\":0,\"subject\":\"¿Operaciones más eficientes en {{company}}?\",\"bodyHtml\":\"<p>Estimado/a {{lead.name}},</p><br><p>Mi nombre es {{sender.name}} de ANTON.IA. Contactamos c",
      "location": ""
    },
    {
      "method": "POST",
      "endpoint": "/api/ai/generate-phone-script",
      "key": "POST /api/ai/generate-phone-script",
      "file": "src/app/api/ai/generate-phone-script/route.ts",
      "ok": true,
      "skipped": false,
      "status": 200,
      "expected": [
        200
      ],
      "durationMs": 4473,
      "responsePreview": "{\"opening\":\"Hola Juan, ¿cómo estás? Vi en tu perfil de LinkedIn que lideras operaciones y estás enfocado en la mejora continua. En ANTON.IA, justamente, ayudamos a empresas a optimizar sus procesos. ¿Cómo va todo con eso",
      "location": ""
    },
    {
      "method": "GET",
      "endpoint": "/api/ai/health",
      "key": "GET /api/ai/health",
      "file": "src/app/api/ai/health/route.ts",
      "ok": true,
      "skipped": false,
      "status": 200,
      "expected": [
        200
      ],
      "durationMs": 77,
      "responsePreview": "{\"ok\":true,\"genkit\":\"not-in-config\",\"ts\":1771284827586}",
      "location": ""
    },
    {
      "method": "POST",
      "endpoint": "/api/ai/outreach-from-report",
      "key": "POST /api/ai/outreach-from-report",
      "file": "src/app/api/ai/outreach-from-report/route.ts",
      "ok": true,
      "skipped": false,
      "status": 200,
      "expected": [
        200
      ],
      "durationMs": 3429,
      "responsePreview": "{\"subject\":\"Automatización de prospección para [Empresa Objetivo]\",\"body\":\"Hola María,\\n\\nSoy [Tu Nombre] de ANTON.IA. Entendemos los desafíos de alcanzar a clientes potenciales de manera efectiva. Por eso, quería coment",
      "location": ""
    },
    {
      "method": "GET",
      "endpoint": "/api/antonia/quota",
      "key": "GET /api/antonia/quota",
      "file": "src/app/api/antonia/quota/route.ts",
      "ok": true,
      "skipped": false,
      "status": 401,
      "expected": "<500",
      "durationMs": 1790,
      "responsePreview": "{\"error\":\"Unauthorized\",\"details\":{\"__isAuthError\":true,\"name\":\"AuthSessionMissingError\",\"status\":400}}",
      "location": ""
    },
    {
      "method": "POST",
      "endpoint": "/api/antonia/trigger",
      "key": "POST /api/antonia/trigger",
      "file": "src/app/api/antonia/trigger/route.ts",
      "ok": true,
      "skipped": false,
      "status": 400,
      "expected": "<500",
      "durationMs": 528,
      "responsePreview": "{\"error\":\"missionId required\"}",
      "location": ""
    },
    {
      "method": "GET",
      "endpoint": "/api/auth/callback",
      "key": "GET /api/auth/callback",
      "file": "src/app/api/auth/callback/route.ts",
      "ok": true,
      "skipped": false,
      "status": 307,
      "expected": [
        302,
        307
      ],
      "durationMs": 543,
      "responsePreview": "",
      "location": "http://localhost:9013/"
    },
    {
      "method": "GET",
      "endpoint": "/api/auth/callback/azure",
      "key": "GET /api/auth/callback/azure",
      "file": "src/app/api/auth/callback/azure/route.ts",
      "ok": true,
      "skipped": false,
      "status": 307,
      "expected": [
        302,
        307
      ],
      "durationMs": 495,
      "responsePreview": "",
      "location": "https://studio--leadflowai-3yjcy.us-central1.hosted.app/outlook?error=no_code"
    },
    {
      "method": "GET",
      "endpoint": "/api/auth/callback/google",
      "key": "GET /api/auth/callback/google",
      "file": "src/app/api/auth/callback/google/route.ts",
      "ok": true,
      "skipped": false,
      "status": 307,
      "expected": [
        302,
        307
      ],
      "durationMs": 635,
      "responsePreview": "",
      "location": "https://studio--leadflowai-3yjcy.us-central1.hosted.app/gmail?error=no_code"
    },
    {
      "method": "POST",
      "endpoint": "/api/contact/bulk-send",
      "key": "POST /api/contact/bulk-send",
      "file": "src/app/api/contact/bulk-send/route.ts",
      "ok": true,
      "skipped": false,
      "status": 503,
      "expected": [
        503
      ],
      "durationMs": 515,
      "responsePreview": "{\"error\":\"Endpoint temporarily disabled due to build issues\"}",
      "location": ""
    },
    {
      "method": "POST",
      "endpoint": "/api/contact/send",
      "key": "POST /api/contact/send",
      "file": "src/app/api/contact/send/route.ts",
      "ok": true,
      "skipped": false,
      "status": 401,
      "expected": "<500",
      "durationMs": 667,
      "responsePreview": "{\"error\":\"Unauthorized - Missing user ID\"}",
      "location": ""
    },
    {
      "method": "GET",
      "endpoint": "/api/cron/antonia",
      "key": "GET /api/cron/antonia",
      "file": "src/app/api/cron/antonia/route.ts",
      "ok": true,
      "skipped": false,
      "status": 200,
      "expected": [
        200
      ],
      "durationMs": 1149,
      "responsePreview": "{\"dryRun\":true,\"authorized\":true,\"activeMissions\":1,\"pendingTasks\":0,\"firebaseForwardConfigured\":false,\"backupProcessingEnabled\":false}",
      "location": ""
    },
    {
      "method": "GET",
      "endpoint": "/api/cron/process-campaigns",
      "key": "GET /api/cron/process-campaigns",
      "file": "src/app/api/cron/process-campaigns/route.ts",
      "ok": true,
      "skipped": false,
      "status": 200,
      "expected": [
        200
      ],
      "durationMs": 2309,
      "responsePreview": "{\"dryRun\":true,\"processed\":582,\"summary\":{\"sent\":0,\"failed\":0,\"eligibleDryRun\":582,\"blockedUnsubscribed\":0,\"blockedDomain\":42},\"resultCount\":582,\"results\":[]}",
      "location": ""
    },
    {
      "method": "GET",
      "endpoint": "/api/debug/apify-token",
      "key": "GET /api/debug/apify-token",
      "file": "src/app/api/debug/apify-token/route.ts",
      "ok": true,
      "skipped": false,
      "status": 200,
      "expected": [
        200
      ],
      "durationMs": 1890,
      "responsePreview": "{\"ok\":true,\"info\":{\"username\":\"plush_zinnia\",\"userId\":\"ZBYXUS5azWYsj4bQW\",\"email\":\"nicolas.yarur.g@yago.cl\"}}",
      "location": ""
    },
    {
      "method": "GET",
      "endpoint": "/api/debug/logs",
      "key": "GET /api/debug/logs",
      "file": "src/app/api/debug/logs/route.ts",
      "ok": true,
      "skipped": false,
      "status": 200,
      "expected": [
        200
      ],
      "durationMs": 766,
      "responsePreview": "{\"logs\":[]}",
      "location": ""
    },
    {
      "method": "POST",
      "endpoint": "/api/debug/logs",
      "key": "POST /api/debug/logs",
      "file": "src/app/api/debug/logs/route.ts",
      "ok": true,
      "skipped": false,
      "status": 200,
      "expected": [
        200
      ],
      "durationMs": 30,
      "responsePreview": "{\"ok\":true}",
      "location": ""
    },
    {
      "method": "DELETE",
      "endpoint": "/api/debug/logs",
      "key": "DELETE /api/debug/logs",
      "file": "src/app/api/debug/logs/route.ts",
      "ok": true,
      "skipped": false,
      "status": 200,
      "expected": [
        200
      ],
      "durationMs": 31,
      "responsePreview": "{\"ok\":true}",
      "location": ""
    },
    {
      "method": "POST",
      "endpoint": "/api/email/bulk-edit",
      "key": "POST /api/email/bulk-edit",
      "file": "src/app/api/email/bulk-edit/route.ts",
      "ok": true,
      "skipped": false,
      "status": 200,
      "expected": [
        200
      ],
      "durationMs": 2439,
      "responsePreview": "{\"drafts\":[{\"subject\":\"Colaboracion para Empresa X\",\"body\":\"Hola {{lead.firstName}}, me gustaria conversar contigo directamente. ¿Tienes 15 minutos para hablar?\",\"lead\":{\"id\":\"lead-1\",\"fullName\":\"Camila Torres\",\"email\":\"",
      "location": ""
    },
    {
      "method": "POST",
      "endpoint": "/api/email/render",
      "key": "POST /api/email/render",
      "file": "src/app/api/email/render/route.ts",
      "ok": true,
      "skipped": false,
      "status": 200,
      "expected": [
        200
      ],
      "durationMs": 772,
      "responsePreview": "{\"subject\":\"ANTON.IA × Empresa X\",\"body\":\"Hola Camila Torres,\\n\\nNoté Seguimiento manual en Empresa X. En ANTON.IA ayudamos con Automatizacion y Mejoramos conversion.\\n\\n¿Te parece una llamada breve esta semana para expl",
      "location": ""
    },
    {
      "method": "POST",
      "endpoint": "/api/email/style/chat",
      "key": "POST /api/email/style/chat",
      "file": "src/app/api/email/style/chat/route.ts",
      "ok": true,
      "skipped": false,
      "status": 200,
      "expected": [
        200
      ],
      "durationMs": 4701,
      "responsePreview": "{\"styleProfile\":{\"scope\":\"leads\",\"name\":\"Estilo conversacional\",\"tone\":\"executive\",\"length\":\"short\",\"structure\":[\"hook\",\"value\",\"cta\"],\"do\":[\"mantener claridad\",\"evitar jerga\",\"ir al grano\"],\"dont\":[\"promesas absolutas\",",
      "location": ""
    },
    {
      "method": "POST",
      "endpoint": "/api/gmail/send",
      "key": "POST /api/gmail/send",
      "file": "src/app/api/gmail/send/route.ts",
      "ok": true,
      "skipped": false,
      "status": 401,
      "expected": "<500",
      "durationMs": 1635,
      "responsePreview": "{\"error\":\"Unauthorized (No Session)\"}",
      "location": ""
    },
    {
      "method": "GET",
      "endpoint": "/api/integrations/store-token",
      "key": "GET /api/integrations/store-token",
      "file": "src/app/api/integrations/store-token/route.ts",
      "ok": true,
      "skipped": false,
      "status": 401,
      "expected": "<500",
      "durationMs": 1098,
      "responsePreview": "{\"error\":\"Unauthorized\"}",
      "location": ""
    },
    {
      "method": "POST",
      "endpoint": "/api/integrations/store-token",
      "key": "POST /api/integrations/store-token",
      "file": "src/app/api/integrations/store-token/route.ts",
      "ok": true,
      "skipped": false,
      "status": 401,
      "expected": "<500",
      "durationMs": 265,
      "responsePreview": "{\"error\":\"Unauthorized\"}",
      "location": ""
    },
    {
      "method": "POST",
      "endpoint": "/api/leads/apify",
      "key": "POST /api/leads/apify",
      "file": "src/app/api/leads/apify/route.ts",
      "ok": true,
      "skipped": false,
      "status": 400,
      "expected": "<500",
      "durationMs": 1042,
      "responsePreview": "{\"error\":\"industry_required\"}",
      "location": ""
    },
    {
      "method": "GET",
      "endpoint": "/api/leads/apify/status",
      "key": "GET /api/leads/apify/status",
      "file": "src/app/api/leads/apify/status/route.ts",
      "ok": true,
      "skipped": false,
      "status": 400,
      "expected": [
        400
      ],
      "durationMs": 715,
      "responsePreview": "{\"error\":\"runId is required\"}",
      "location": ""
    },
    {
      "method": "POST",
      "endpoint": "/api/leads/enrich-email",
      "key": "POST /api/leads/enrich-email",
      "file": "src/app/api/leads/enrich-email/route.ts",
      "ok": true,
      "skipped": false,
      "status": 400,
      "expected": "<500",
      "durationMs": 662,
      "responsePreview": "{\"success\":false,\"error\":\"Name and company are required\"}",
      "location": ""
    },
    {
      "method": "POST",
      "endpoint": "/api/leads/search",
      "key": "POST /api/leads/search",
      "file": "src/app/api/leads/search/route.ts",
      "ok": true,
      "skipped": false,
      "status": 400,
      "expected": [
        400
      ],
      "durationMs": 883,
      "responsePreview": "{\"error\":\"INVALID_REQUEST_BODY\",\"details\":{\"formErrors\":[\"Expected array, received object\"],\"fieldErrors\":{}}}",
      "location": ""
    },
    {
      "method": "POST",
      "endpoint": "/api/opportunities/enrich-apollo",
      "key": "POST /api/opportunities/enrich-apollo",
      "file": "src/app/api/opportunities/enrich-apollo/route.ts",
      "ok": true,
      "skipped": false,
      "status": 401,
      "expected": "<500",
      "durationMs": 1155,
      "responsePreview": "{\"error\":\"missing user id\"}",
      "location": ""
    },
    {
      "method": "POST",
      "endpoint": "/api/opportunities/leads-apollo",
      "key": "POST /api/opportunities/leads-apollo",
      "file": "src/app/api/opportunities/leads-apollo/route.ts",
      "ok": true,
      "skipped": false,
      "status": 401,
      "expected": "<500",
      "durationMs": 1104,
      "responsePreview": "{\"error\":\"Unauthorized\"}",
      "location": ""
    },
    {
      "method": "POST",
      "endpoint": "/api/opportunities/orgs-apollo",
      "key": "POST /api/opportunities/orgs-apollo",
      "file": "src/app/api/opportunities/orgs-apollo/route.ts",
      "ok": true,
      "skipped": false,
      "status": 400,
      "expected": "<500",
      "durationMs": 754,
      "responsePreview": "{\"error\":\"companyName requerido\"}",
      "location": ""
    },
    {
      "method": "POST",
      "endpoint": "/api/opportunities/search",
      "key": "POST /api/opportunities/search",
      "file": "src/app/api/opportunities/search/route.ts",
      "ok": true,
      "skipped": false,
      "status": 401,
      "expected": "<500",
      "durationMs": 1260,
      "responsePreview": "{\"error\":\"Unauthorized\"}",
      "location": ""
    },
    {
      "method": "GET",
      "endpoint": "/api/opportunities/status",
      "key": "GET /api/opportunities/status",
      "file": "src/app/api/opportunities/status/route.ts",
      "ok": true,
      "skipped": false,
      "status": 400,
      "expected": [
        400
      ],
      "durationMs": 1201,
      "responsePreview": "{\"error\":{\"type\":\"invalid-input\",\"message\":\"Falta \\\"runId\\\".\"}}",
      "location": ""
    },
    {
      "method": "POST",
      "endpoint": "/api/outlook/send",
      "key": "POST /api/outlook/send",
      "file": "src/app/api/outlook/send/route.ts",
      "ok": true,
      "skipped": false,
      "status": 400,
      "expected": [
        400
      ],
      "durationMs": 1153,
      "responsePreview": "{\"error\":\"missing user id\"}",
      "location": ""
    },
    {
      "method": "POST",
      "endpoint": "/api/providers/send",
      "key": "POST /api/providers/send",
      "file": "src/app/api/providers/send/route.ts",
      "ok": true,
      "skipped": false,
      "status": 401,
      "expected": "<500",
      "durationMs": 1365,
      "responsePreview": "{\"error\":\"Unauthorized\"}",
      "location": ""
    },
    {
      "method": "GET",
      "endpoint": "/api/quota/status",
      "key": "GET /api/quota/status",
      "file": "src/app/api/quota/status/route.ts",
      "ok": true,
      "skipped": false,
      "status": 200,
      "expected": [
        200
      ],
      "durationMs": 1347,
      "responsePreview": "{\"userId\":\"smoke-test-user\",\"statuses\":[{\"resource\":\"leadSearch\",\"allowed\":false,\"count\":0,\"limit\":50,\"dayKey\":\"2026-02-16\",\"resetAtISO\":\"2026-02-17T00:00:00.000Z\"},{\"resource\":\"research\",\"allowed\":false,\"count\":0,\"limit",
      "location": ""
    },
    {
      "method": "POST",
      "endpoint": "/api/replies/classify",
      "key": "POST /api/replies/classify",
      "file": "src/app/api/replies/classify/route.ts",
      "ok": true,
      "skipped": false,
      "status": 401,
      "expected": "<500",
      "durationMs": 1101,
      "responsePreview": "{\"error\":\"Unauthorized\"}",
      "location": ""
    },
    {
      "method": "GET",
      "endpoint": "/api/research/n8n",
      "key": "GET /api/research/n8n",
      "file": "src/app/api/research/n8n/route.ts",
      "ok": true,
      "skipped": false,
      "status": 200,
      "expected": "<500",
      "durationMs": 950,
      "responsePreview": "{\"ok\":true,\"hasUrl\":true}",
      "location": ""
    },
    {
      "method": "POST",
      "endpoint": "/api/research/n8n",
      "key": "POST /api/research/n8n",
      "file": "src/app/api/research/n8n/route.ts",
      "ok": true,
      "skipped": false,
      "status": 400,
      "expected": [
        400
      ],
      "durationMs": 161,
      "responsePreview": "{\"error\":\"Payload incompleto: requiere id/email/linkedin o nombre+empresa\"}",
      "location": ""
    },
    {
      "method": "POST",
      "endpoint": "/api/scheduler/complete",
      "key": "POST /api/scheduler/complete",
      "file": "src/app/api/scheduler/complete/route.ts",
      "ok": true,
      "skipped": false,
      "status": 400,
      "expected": [
        400
      ],
      "durationMs": 926,
      "responsePreview": "{\"error\":\"Missing id or status\"}",
      "location": ""
    },
    {
      "method": "GET",
      "endpoint": "/api/scheduler/poll",
      "key": "GET /api/scheduler/poll",
      "file": "src/app/api/scheduler/poll/route.ts",
      "ok": true,
      "skipped": false,
      "status": 200,
      "expected": "<500",
      "durationMs": 1407,
      "responsePreview": "{\"tasks\":[]}",
      "location": ""
    },
    {
      "method": "POST",
      "endpoint": "/api/scheduler/reply",
      "key": "POST /api/scheduler/reply",
      "file": "src/app/api/scheduler/reply/route.ts",
      "ok": true,
      "skipped": false,
      "status": 200,
      "expected": [
        200
      ],
      "durationMs": 1703,
      "responsePreview": "{\"message\":\"Lead not found for reply\",\"matched\":false}",
      "location": ""
    },
    {
      "method": "GET",
      "endpoint": "/api/tracking/click",
      "key": "GET /api/tracking/click",
      "file": "src/app/api/tracking/click/route.ts",
      "ok": true,
      "skipped": false,
      "status": 307,
      "expected": [
        302,
        307
      ],
      "durationMs": 906,
      "responsePreview": "",
      "location": "https://example.com/"
    },
    {
      "method": "GET",
      "endpoint": "/api/tracking/open",
      "key": "GET /api/tracking/open",
      "file": "src/app/api/tracking/open/route.ts",
      "ok": true,
      "skipped": false,
      "status": 200,
      "expected": [
        200
      ],
      "durationMs": 908,
      "responsePreview": "GIF89a\u0001\u0000\u0001\u0000�\u0000\u0000\u0000\u0000\u0000���!�\u0004\u0001\u0000\u0000\u0000\u0000,\u0000\u0000\u0000\u0000\u0001\u0000\u0001\u0000\u0000\u0002\u0001D\u0000;",
      "location": ""
    },
    {
      "method": "POST",
      "endpoint": "/api/tracking/unsubscribe",
      "key": "POST /api/tracking/unsubscribe",
      "file": "src/app/api/tracking/unsubscribe/route.ts",
      "ok": true,
      "skipped": false,
      "status": 400,
      "expected": [
        400
      ],
      "durationMs": 939,
      "responsePreview": "{\"error\":\"Invalid request parameters\"}",
      "location": ""
    },
    {
      "method": "POST",
      "endpoint": "/api/tracking/webhook",
      "key": "POST /api/tracking/webhook",
      "file": "src/app/api/tracking/webhook/route.ts",
      "ok": true,
      "skipped": false,
      "status": 200,
      "expected": [
        200,
        401
      ],
      "durationMs": 1197,
      "responsePreview": "{\"success\":true}",
      "location": ""
    },
    {
      "method": "POST",
      "endpoint": "/api/webhooks/apollo",
      "key": "POST /api/webhooks/apollo",
      "file": "src/app/api/webhooks/apollo/route.ts",
      "ok": true,
      "skipped": false,
      "status": 400,
      "expected": [
        400
      ],
      "durationMs": 1958,
      "responsePreview": "{\"error\":\"Missing enriched_lead_id param\"}",
      "location": ""
    }
  ]
}